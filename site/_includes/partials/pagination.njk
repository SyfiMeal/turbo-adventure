{% from 'macros/icon.njk' import icon with context %}

{% if paged %}
  {#
    Look for the magic value "paged" which is used for multidimensional paged data, generated by
    the `addPagination` helper for tags. We expect it to be of global type PaginatedPage, defined
    in "add-pagination.d.ts".
    This isn't 11ty's real object but we just use it for URLs.
  #}
  {% set paginationObject = paged.contents %}
{% else %}
  {#
    Otherwise, this is 11ty's real pagination object (see https://www.11ty.dev/docs/pagination/).
  #}
  {% set paginationObject = pagination %}
{% endif %}

{% if paginationObject.href.previous or paginationObject.href.next %}
<nav class="pagination gap-top-300 pad-left-400 pad-right-400">

  {#
    We expand this out to both options: button available and missing, as Lighthouse is unhappy with
    a lone <a> without a href.
  #}

  {% if paginationObject.href.previous %}
    <a class="pagination__button type--small gap-right-200 text-align-center" href="{{ paginationObject.href.previous }}">
      {{ icon('arrow-back', {hidden: true}) }}
      <span>{{ 'i18n.common.newer_posts' | i18n(locale) }}</span>
    </a>
  {% else %}
    <span class="pagination__button type--small gap-right-200 text-align-center" aria-hidden="true">
      {{ icon('arrow-back', {hidden: true}) }}
      <span>{{ 'i18n.common.newer_posts' | i18n(locale) }}</span>
    </span>
  {% endif %}

  {% if paginationObject.href.next %}
    <a class="pagination__button type--small gap-left-200 text-align-center" href="{{ paginationObject.href.next }}">
      <span>{{ 'i18n.common.older_posts' | i18n(locale) }}</span>
      {{ icon('arrow-forward', {hidden: true}) }}
    </a>
  {% else %}
    <span class="pagination__button type--small gap-left-200 text-align-center" aria-hidden="true">
      <span>{{ 'i18n.common.older_posts' | i18n(locale) }}</span>
      {{ icon('arrow-forward', {hidden: true}) }}
    </span>
  {% endif %}

  </a>
</nav>
{% endif %}
